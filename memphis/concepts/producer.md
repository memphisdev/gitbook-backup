---
description: This section describes Memphis producer API
cover: ../../.gitbook/assets/Memphis concepts (2).jpeg
coverY: 0
---

# Producer API

## What is a producer?

A producer represents the originating application or service responsible for sending data or messages to the broker or, more specifically, to a station. When a client establishes a connection with Memphis, it consists of various components:

1. Connection - This involves an open socket linking the client to Memphis.
2. Producer - To write data or messages into a Memphis station, you need to declare a producer entity.
3. (And/Or) Consumer - To retrieve data or messages from a Memphis station, a consumer entity declaration is required.

<figure><img src="../../.gitbook/assets/Producer.jpeg" alt=""><figcaption></figcaption></figure>

### Broker's Data Format

Memphis employs binary data encoding for reading, storing, and writing data to enhance performance, ensure format alignment, and optimize memory allocation. When a producer generates a message for a Memphis station, it undergoes conversion into a binary format.

An example from the `node.js` SDK using `Buffer.from` -

```
await producer.produce({
  message: Buffer.from("Message: Hello world"),
});
```

<figure><img src="../../.gitbook/assets/produce 1.jpeg" alt=""><figcaption></figcaption></figure>

{% hint style="warning" %}
**Nonexistent** stations will be **automatically** generated by the SDK upon the initial connection of a producer or consumer.
{% endhint %}

{% hint style="info" %}
Full API guide and code examples can be found here [Broken link](broken-reference "mention")
{% endhint %}

## Performance Optimizations

{% hint style="info" %}
A full guide can be found [here](../../memphis-broker/best-practices/producer-optimization.md)
{% endhint %}

### 1. Non-blocking producer

Opting for a non-blocking producer type ensures that the client won't halt the subsequent system call or message production while waiting for an acknowledgment from the broker regarding the message transmission. This choice empowers the client's CPU to harness its resources for increased parallelism, effectively eliminating periods of idle waiting.

The parameter is called `asyncProduce` and can be found in any supported client library [here](broken-reference) or through the following example -&#x20;

```java
await producer.produce({
    message: 'test'
    asyncProduce: true // true for non-blocking, false for blocking
});
```

### 2. Partitions

Memphis incorporates a partitioning system, which is fundamental to enhancing concurrent operations within its stations. This approach involves dividing the active station into multiple partitions or segments distributed across one or more Memphis brokers. This partitioning strategy optimizes the processing and management of data, ensuring efficient and scalable handling of information flow.

<figure><img src="../../.gitbook/assets/partitions 1.jpeg" alt=""><figcaption><p>Memphis partitions</p></figcaption></figure>

Read [here](station.md#partitions) to learn more and how to use it.

### Produce messages to multiple stations simultaneously&#x20;

<figure><img src="../../.gitbook/assets/image (15).png" alt="" width="563"><figcaption></figcaption></figure>

When specifying a producer, you have the option to send a message simultaneously to multiple stations.

An example from the [Node.js SDK](https://github.com/memphisdev/memphis.js#produce-to-multiple-stations):

```
stationName: ['<station-name>', '<station-name>']
```

## Supported Protocols

* [TCP-based SDKs](broken-reference)
* [HTTP](https://github.com/memphisdev/memphis-http-proxy)

